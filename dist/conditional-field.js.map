{"version":3,"sources":["conditional-field.js"],"names":["ConditionalField","args","$controls","$","control","length","parent","setAllVisible","onChangeBound","onChange","bind","on","e","$control","target","setVisible","value","inputValue","console","log","controlValue","visibility","$element","closest","find","toString","show","hide","each","index","inputType","getInputType","is","filter","val","off"],"mappings":";;;;;;IAAMA,gB;AACJ,4BAAYC,IAAZ,EAAiB;AAAA;;AACf,SAAKC,SAAL,GAAiBC,EAAEF,KAAKG,OAAP,CAAjB;;AAEA,QAAG,KAAKF,SAAL,CAAeG,MAAf,IAAyB,CAA5B,EAA+B;;AAE/B,SAAKJ,IAAL,GAAYA,IAAZ;AACA,SAAKA,IAAL,CAAUK,MAAV,GAAmB,KAAKL,IAAL,CAAUK,MAAV,IAAoB,KAAvC;;AAEA,SAAKC,aAAL;;AAEA,SAAKC,aAAL,GAAqB,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAArB;AACA,SAAKR,SAAL,CAAeS,EAAf,CAAkB,QAAlB,EAA4B,KAAKH,aAAjC;AACD;;;;6BAEQI,C,EAAG;AACV,UAAIC,WAAWV,EAAES,EAAEE,MAAJ,CAAf;AACA,WAAKC,UAAL,CAAgBF,QAAhB;AACD;;;+BAEUA,Q,EAAU;AACnB,UAAMG,QAAQ,KAAKC,UAAL,CAAgBJ,QAAhB,CAAd;AACDK,cAAQC,GAAR,CAAYN,QAAZ;AACAK,cAAQC,GAAR,CAAYH,KAAZ;AACC,WAAI,IAAII,YAAR,IAAwB,KAAKnB,IAAL,CAAUoB,UAAlC,EAA6C;AAC3C,YAAMC,WACJ,KAAKrB,IAAL,CAAUK,MAAV,GACAO,SAASU,OAAT,CAAkB,KAAKtB,IAAL,CAAUK,MAA5B,EAAqCkB,IAArC,CAA2C,KAAKvB,IAAL,CAAUoB,UAAV,CAAsBD,YAAtB,CAA3C,CADA,GAEAjB,EAAG,KAAKF,IAAL,CAAUoB,UAAV,CAAsBD,YAAtB,CAAH,CAHF;;AAKA,YAAGJ,MAAMS,QAAN,OAAqBL,aAAaK,QAAb,EAAxB,EAAgD;AAC5CH,mBAASI,IAAT;AACH,SAFD,MAEK;AACDJ,mBAASK,IAAT;AACH;AACF;AACF;;;oCAEe;AAAA;;AACd,WAAKzB,SAAL,CAAe0B,IAAf,CAAqB,UAAEC,KAAF,EAASzB,OAAT,EAAsB;AACzC,cAAKW,UAAL,CAAgBZ,EAAEC,OAAF,CAAhB;AACD,OAFD;AAGD;;;+BAYUS,Q,EAAU;AACnB,UAAIiB,YAAY9B,iBAAiB+B,YAAjB,CAA8BlB,QAA9B,CAAhB;AAAA,UACIG,QAAQ,EADZ;AAEA,cAAOc,SAAP;AACE,aAAK,UAAL;AACEd,kBAAQH,SAASmB,EAAT,CAAY,UAAZ,IAA0B,IAA1B,GAAiC,KAAzC;AACA;AACF,aAAK,OAAL;AACEhB,kBAAQ,KAAKd,SAAL,CAAe+B,MAAf,CAAsB,UAAtB,EAAkCC,GAAlC,EAAR;AACA;AACF;AACElB,kBAAQH,SAASqB,GAAT,EAAR;AARJ;AAUA,aAAOlB,KAAP;AACD;;;8BAES;AACR,WAAKd,SAAL,CAAeiC,GAAf,CAAmB,QAAnB,EAA6B,KAAK3B,aAAlC;AACD;;;iCA5BmBK,Q,EAAU;AAC5B,UAAGA,SAASmB,EAAT,CAAY,QAAZ,CAAH,EAAyB;AACvB,eAAO,QAAP;AACD,OAFD,MAEM,IAAGnB,SAASmB,EAAT,CAAY,QAAZ,CAAH,EAAyB;AAC7B,eAAO,OAAP;AACD,OAFK,MAEA,IAAGnB,SAASmB,EAAT,CAAY,WAAZ,CAAH,EAA4B;AAChC,eAAO,UAAP;AACD;AACF","file":"conditional-field.js","sourcesContent":["class ConditionalField {\n  constructor(args){\n    this.$controls = $(args.control);\n\n    if(this.$controls.length <= 0) return;\n\n    this.args = args;\n    this.args.parent = this.args.parent || false;\n\n    this.setAllVisible();\n\n    this.onChangeBound = this.onChange.bind(this);\n    this.$controls.on('change', this.onChangeBound);\n  }\n\n  onChange(e) {\n    let $control = $(e.target);\n    this.setVisible($control);\n  }\n\n  setVisible($control) {\n    const value = this.inputValue($control);\n\t  console.log($control);\n\t  console.log(value);\n    for(let controlValue in this.args.visibility){\n      const $element =\n        this.args.parent ?\n        $control.closest( this.args.parent ).find( this.args.visibility[ controlValue ] ) :\n        $( this.args.visibility[ controlValue ] );\n\n      if(value.toString() === controlValue.toString()){\n          $element.show();\n      }else{\n          $element.hide();\n      }\n    }\n  }\n\n  setAllVisible() {\n    this.$controls.each( ( index, control ) => {\n      this.setVisible($(control));\n    });\n  }\n\n  static getInputType($control) {\n    if($control.is('select')){\n      return 'select';\n    }else if($control.is(':radio')){\n      return 'radio';\n    }else if($control.is(':checkbox')){\n      return 'checkbox';\n    }\n  }\n\n  inputValue($control) {\n    let inputType = ConditionalField.getInputType($control),\n        value = '';\n    switch(inputType){\n      case 'checkbox':\n        value = $control.is(':checked') ? 'on' : 'off';\n        break;\n      case 'radio':\n        value = this.$controls.filter(':checked').val();\n        break;\n      default:\n        value = $control.val();\n    }\n    return value;\n  }\n\n  destroy() {\n    this.$controls.off('change', this.onChangeBound);\n  }\n}"]}